/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: programming club fricking rules
@author: klaus-E2S
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const toilet = "t"
const tp = "q"
const victorytune = tune`
225.5639097744361: B4/225.5639097744361 + G5~225.5639097744361 + C4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: D5/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: C4^225.5639097744361,
225.5639097744361: D4^225.5639097744361,
225.5639097744361: G5/225.5639097744361 + C4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: F5/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: C4^225.5639097744361,
225.5639097744361: D5/225.5639097744361 + D4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: E5/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: D4^225.5639097744361,
225.5639097744361: B4/225.5639097744361 + C4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: A4/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: G4/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: D4^225.5639097744361,
225.5639097744361: E4/225.5639097744361 + C4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: G4/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: B4/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: D4^225.5639097744361,
225.5639097744361: C4^225.5639097744361,
225.5639097744361: E5/225.5639097744361 + A5~225.5639097744361 + D4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: C4^225.5639097744361,
225.5639097744361: B4/225.5639097744361 + D4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: A4/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: G4/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: F4/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: E4/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: G4/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: B4/225.5639097744361 + D4^225.5639097744361,
225.5639097744361: C4^225.5639097744361,
225.5639097744361: D5/225.5639097744361 + D4^225.5639097744361 + G4-225.5639097744361,
225.5639097744361: C5/225.5639097744361 + C4^225.5639097744361,
225.5639097744361: B4/225.5639097744361 + D4^225.5639097744361`
const s = "s"
const t = "y"
const o = "o"
const r = "r"
const e = "e"
const plunger = "l"
const brick = "b"
const rock = "d"
const tree = "g"
const faketreelmao = "f"
const downarrow = "a"
const satan = "c"
const fire = "h"
const ammorock = "j"
const fakefire = "x"
const rightarrow = "w"
const step = tune`
500: C4~500,
15500`

setLegend(
  [ player, bitmap`
................
................
................
.....CLLLC......
....CL5L5LC.....
...CCLLLLL555...
....CC2020CC....
.....C2222C.....
.....75557......
....7755577.....
...22.555.22....
..22..5.5..22...
......5.5.......
......5.5.......
.....00.00......
................` ],
  [ toilet, bitmap`
0000000000000000
0222222222222220
0000000000000000
...0222222220...
...0222222220...
...0222222220...
...0222222220...
...0222222220...
..000000000000..
.01111111111110.
.00LLLLLLLLLL00.
.02000000000020.
.02222222222220.
0002222222222000
0220000000000220
0000000000000000` ],
  [ tp, bitmap`
................
..000...........
.022200.........
.0202200........
0202202200......
02220222220.....
.020222222200...
..022222222220..
...02222222220..
....0222222220..
.....02222220...
......0222220...
.......00220....
.........00.....
................
................`],
  [ s, bitmap`
................
................
........000000..
.....0000.......
...00...........
...0............
...000..........
......00000.....
..........0.....
..........0.....
..00.....00.....
....000000......
................
................
................
................`],
  [ t, bitmap`
................
.......0........
.......0........
......000000....
.00000.00..0000.
........0.......
........0.......
........0.......
........0.......
.......0........
.......0........
.......0........
.......0........
.......0........
.......0........
................`],
  [ o, bitmap`
................
......000.......
....00..00000...
...00.......00..
..0..........0..
..0..........0..
.0...........0..
00...........0..
0............0..
.0...........0..
.00..........0..
..00.........0..
....00......0...
.....000....0...
........0000....
................`],
  [ r, bitmap`
................
................
................
..0.............
..0.0000000.....
..000.....00....
..00.......0....
...0............
...0............
...0............
...0............
...0............
...0............
...0............
................
................`],
  [ e, bitmap`
................
................
................
................
......000000....
....00.....0....
...0.......0....
..0.00..000.....
..0...00........
..0.............
..00............
...0............
....0...........
.....0000.......
.........0000...
................`],
  [ plunger, bitmap`
................
................
................
..44............
..444...........
...444..........
....444.........
.....444........
......444.......
.......443333...
......33333033..
......33300033..
......3330333...
......333333....
................
................`],
  [ brick, bitmap`
CCCCC0CCCCC0CCCC
CCCCC0CCCCC0CCCC
0000000000000000
CC0CCCCC0CCCCC0C
CC0CCCCC0CCCCC0C
0000000000000000
CCCCC0CCCCC0CCCC
CCCCC0CCCCC0CCCC
0000000000000000
CC0CCCCC0CCCCC0C
CC0CCCCC0CCCCC0C
0000000000000000
CCCCC0CCCCC0CCCC
CCCCC0CCCCC0CCCC
0000000000000000
CC0CCCCC0CCCCC0C`],
  [ rock, bitmap`
L111111111111111
1111111111111111
1111111111111111
1111111LLLLL1111
1111111LLLLLLLLL
LL111LLLL11LLLLL
LLLLLLL111111111
111LLL1111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
LL11111111LLL111
LLLLLLLLLLLLLLLL
LLLLLLLL11111111
LL11111111111111`],
  [ tree, bitmap`
................
....DD..........
...D4DD.DD......
..D44DDDDDD.....
.D4DDDD44DDD4...
.DDDDDD4DDDD4...
..DDDDDDDDDDD...
..DD4DDD44DDDD..
..D44DDD4DDDD4..
.D44DDDDDDCDD4..
.DDDDDDDCCC.DD..
...DDDCCCCC.....
.....CCCCCC.....
.....CCCCCC.....
..CCCCCCCCCCCC..
.CCCCCCCCCCCCCC.`],
  [ faketreelmao, bitmap`
................
....DD..........
...D4DD.DD......
..D44DDDDDD.....
.D4DDDD44DDD4...
.DDDDDD4DDDD4...
..DDDDDDDDDDD...
..DD4DDD44DDDD..
..D44DDD4DDDD4..
.D44DDDDDDCDD4..
.DDDDDDDCCC.DD..
...DDDCCCCC.....
.....CCCCCC.....
.....CCCCCC.....
..CCCCCCCCCCCC..
.CCCCCCCCCCCCCC.`],
  [ downarrow, bitmap`
......0000......
......0220......
......0330......
......0330......
......0330......
......0330......
......0330......
......0330......
...0000330000...
....02233220....
....0C3333C0....
.....033330.....
.....0C33C0.....
......0330......
......0CC0......
.......00.......`],
  [ satan, bitmap`
......2...2.....
.....2.....2....
.....2233322....
......33333.....
......30303.....
......33333.....
......33333.....
.....3333333....
....333333333...
..3333333333333.
..333.33333.333.
..323.33333.323.
...2..33333..2..
......33.33.....
......22.22.....
....2222.2222...`],
  [ fire, bitmap`
................
................
..6.............
.66..6..66......
.66.66..66......
.66.666.66......
.66.666.666.6...
.666666666666...
.663666663666...
.663633663666...
.663333633666...
.663333333666...
..66332233666...
...633333366....
....6633666.....
.....66666......`],
  [ ammorock, bitmap`
................
................
................
........00......
......00110.....
...000111110....
..01111111110...
.0111111111110..
.0001111111110..
.0LL0001110000..
..0LLLL000LLL0..
..0LLLLL0LLLLL0.
..0LLLLL0LLLLL0.
...0LLLL0LLL0L0.
....00LL0000.00.
......000.......`],
  [ fakefire, bitmap`
................
...66..6......6.
..66...6.6....6.
..66...6.6...66.
..66..66.6...66.
..666.6666...66.
..666.66666.666.
..666666366.666.
..636666336666..
..633663336666..
..663333336366..
..663332233366..
..66633223366...
...6633333366...
...666333336....
....6666666.....`],
  [ rightarrow, bitmap`
................
................
................
........0.......
........000.....
........02200...
000000000332200.
0222222223333220
0CCCCCCCC3333CC0
00000000033CC00.
........0CC00...
........000.....
........0.......
................
................
................`]
)

let level = 0
const levels = [ 
  map`
......
....q.
...p..
......
..t...`,
  map`
.............
.............
.......syore.
......b.....b
......b.q.l.b
......b.....b
.......bb.bb.
.............
.............
.p...........
.t...........`,
  map`
dddg...................
dddd...................
ddddg..................
ddddgg.................
d...ggg................
d.q.gggg...............
dg..ggggg..............
dd..dggggg.............
dd..ddddggg............
dd..d...dgggg..........
dd.......dggggg........
dd..d......dgggg.......
dd..d..d...dddgg.......
dd..d.d....d..dd.......
dd....d..dd............
dddd..d.......dddg....p
ddddddd......dddddgg..t
dddddddddddddddddddd...`,
  map`
gggggggggggggggggggg..a.gggggggggggg
gggggggggggg.ggg.....q.......ggggggg
ggggggg....g.ggg.ggggg.ggggg.ggggggg
gg......gg.g.g.g.gg..g.gg...gggggggg
gg.ggg..gg.g.g.g.g..gg.gg.ggggg..ggg
gg.gggg.gg.g.g.g.gg.gg.gg.ggggg..ggg
gg.gggg.gg.g.g...gg.gg.gg...gg..g.gg
gg.ggg..gg.g.g.g.g...g.gggg..g.gg.gg
gg.ggg.ggg.g.g.g.g.g.g.g.ggg.g.gg.gg
gg.ggg.ggg...g.g.g.g.g.g.g...g.gg.gg
gg.ggg..gg..gg.g.ggg.g.g.g.ggg.gg.gg
gg.gggg.ggg.gggg.....g.g.g.ggg.gg.gg
gg.gggg..ggggg....gg.g.g.g.g..gg.ggg
gg.ggggg.......gg..g.g.g.g...gg..ggg
gg..gggggggggg..gggggg.g.gggg...gggg
ggg...gggg...gg......g.g.gg...gggggg
ggggg....ggg.ggggg.g.g.g.g..gggggggg
gggggggg..gg.gg....g.g.g.g..gggggggg
g......gg..g.gg.gggggg.g.gg......ggg
g.gggggggg.g.g..gg...g.g.ggggggg..gg
g.gggggggg.g.gg.gg.g.g.g....gggg..gg
g.gg.......g.gg.gg.g.g.gg.g......ggg
g.gg.ggggggg.gg.gg.g.g.gg.ggggggg...
g.gg.....ggg.gg....g.g.gg.gggggg..gg
g.gggggg.ggg.gg.gggg.g.gg........ggg
g.............g....g.g.ggggggggggggg
gggggggggggggggggg.gggfggggggggggggg
..................p.................
..................t.................
....................................`,
  map`
hxxxxxxhhhxphhhhhhhhhhh
hxhhhhxhxhxhhhxxxxxxxxh
hxxhxhxxxxxhhxxhhhhhhxh
hhxhxhhhhhhhhhxxxxxhhxh
hhxhxxxxxxxhhhhhhhxxhxh
hhxxhhhhhhxxxxxxhhhxhxh
hhhxxhhchhhhhhhxhhhxhxh
hhhhxhhxxxxhhhhxhhhxhxh
hhxxxxhxhhxxxxhxhhhxhhx
hxxhhxxxhhhhhhhhxhxhhhx
hxhhhhhhxxxhhhhhxxhhhhx
hxhhhhhhhhhxxxxxxhhhhhx
hxxhhhhhhhhhhhhhhhhxxhx
hhxxxxhhhxxxhhhhhxxxhhx
hhxhhxxxhhhxxxxxxxhhhxx
hxxhxxhhhhhhhhhhxhhhhxh
hxhhxhhhxxq.thxxxhhhxxh
hhhhxxxxxhhhhhhhxxxxxhh
hhhhhhhhhhhhhhhhhhhhhhh`,
  map`
......
......
p..q.t
......
......`
]

setMap(levels[level])

setPushables({
  [ player ]: [ tp ]
})

setSolids([ player, tp, s, t, o, r, e, brick, rock, tree, fire, ammorock ])

onInput("s", () => {
  getFirst(player).y += 1;
})

onInput("w", () => {
  getFirst(player).y += -1
})

onInput("a", () => {
  getFirst(player).x += -1
})

onInput("d", () => {
  getFirst(player).x += 1
})

onInput("j", () => {
  const currentLevel = levels[level]; 

  if (currentLevel !== undefined) {
    clearText("");
    setMap(currentLevel);
  }
});

afterInput(() => {
  playTune(step);
  const targetNumber = tilesWith(toilet).length;
  const numberCovered = tilesWith(toilet, tp).length;
  const numberCovered2 = tilesWith(toilet, plunger).length;
  const eviltargetNumber = tilesWith(satan).length;
  const evilnumberCovered = tilesWith(satan, tp).length;
  if (numberCovered === targetNumber) {
    level = level + 1;
    const currentLevel = levels[level];
    if (currentLevel !== undefined) {
      setMap(currentLevel);
    } else {
      addText("toilet cleaned! :D", { y : 4 });
      playTune(victorytune);
    }
  }
})


  